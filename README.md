# 依存関係の変化を利用したコードレビュアー推薦手法への適用-OSSプロジェクトへの適用実験

## 背景
* プロジェクトのプルリクエストを送られたときにコードレビューを行う人物を推薦したい.
* 以前の研究ではレビュー経験の多い人ほど信頼性が高いことが分かっている.(前のOSSに出した論文)
* レビュー回数だけで推薦していると回数上位者の負担が大きい
* プログラムの依存関係からレビュー対象のプルリクエストに対して専門性の高いレビュアーを推薦したい.

## 関連研究
* 行のみのもの:Baseline Approach: ReviewBot(Balachandram ICSE'13)
* ファイルパスが近いもの:RevFinder (Patanamon Thongtanunam, Who sould review my code?, SANER2015) 

## 問題
* 行やファイルパスよりも開発者と関わりの深そうなパラメータで見てみたい
* ファイルパスが近くないものも見つけていきたい.

## アプローチ
### クラスや変数の依存関係を調べ開発者の得意領域を定義する
1. 呼び出しなどを含めた依存関係を含んだパラメータ（同一クラス・メソッド・変数）を編集した回数をレビュアーごとにカウント.
* 次回で新しいプルリクエスが送られたときにそのパラメータを編集した回数で推薦する.

## やらない分析/***理由***/できた場合のメリット
* マークアップ言語/***ツールのサポート外***/テストなどでよく使われているしWebアプリでは必須
* 複数プロジェクトを含めた分析/***大変***/GitHubでの経験をすべてカバーできるし大規模プロジェクトならかかわりあっている可能性は高い

## 今後できたらやりたい（今回は優先度が低い）
* 開発者の推薦
* issueに対するレビュアーの推薦

## 現在利用されているレビュアー推薦ボット
* [mention-bot](https://github.com/facebook/mention-bot)(javascript):facebook製.git blameから過去を遡ってレビュアーを選定する
* hobbit-bot:ランダムにレビュアーを選定する

## 利用できそうな技術(太字は利用テスト中)
* タグ付け:ctags, **gtags**
* 呼び出し関係:ctrace, Itrace, strace, ktrace, trusss
* 依存関係を調べるもの:**[Doxygen](http://www.doxygen.jp/)(ドキシジェン)**, Understand

## 提案手法の評価基準
### 長さ
* 時間
* レビュー数  

### レビュー後の行動
* リピート率

### 人数
* 推薦される人数
* 一人当たりの担当数  
  max down, mid up　となればいい感じにばらついている感じがする

### 信頼性
- 推薦した結果実際にレビューをしたかどうか

## doxygenを利用するにあたって
* XML形式で出力可能！
* ファイル名がわかりやすいので処理が簡単そう
* ~~GUIで動かしているからコマンドを利用した自動化ができるかどうかが不安~~CLIでの使い方が書いてあった
* 使い方 http://www.doxygen.jp/manual.html
* コードの行が書いていないか？byK→書いてあった！(ex. `<codeline lineno="x">`)

## 処理手順
1. diffを利用して変更されたファイルのファイル名と行を特定
* doxygenを利用してXML化
* XMLをプログラムで処理してオブジェクトとして管理
* git blameを利用してその部分に関わったレビュアーをカウント
* カウントの多い順にレビュアーをソート
* mention-botと推薦人数ごとに実際にレビューするかどうか比較


```
# 設定ファイルを作成する
doxygen -g <config_file>
```